# Changelog

## 0.3.1 - 2025-03-17

- Контейнерная песочница стала «боевой»: пытается запустить код через docker CLI (python:3.11-slim), с ограничениями по памяти/CPU; при отсутствии docker — fallback в процессную изоляцию.
- Все тесты (core + in-memory транспорт) проходят.

## 0.3.0 - 2025-03-17

- Pipeline: исправлен статус выполнения, преобразование задач из dict, подстановка данных зависимостей; тесты покрывают map → map_reduce цепочку.
- Исправлены edge-case'ы executor'а: map/map_reduce fallback данные, range_reduce шаг, map function 'x', generic reduce агрегатор.
- Добавлены базовые core-тесты (`tests/test_executor_core.py`) для map/range_reduce/generic/pipeline.
- Все тесты проходят (in-memory транспорт + новые core-тесты).

## 0.2.9 - 2025-03-17

- WASM песочница больше не NotImplemented: использует процессную изоляцию как временный fallback (логируя отсутствие wasm-рантайма).

## 0.2.8 - 2025-03-17

- Контейнерная песочница перестала быть NotImplemented: использует процессную изоляцию как fallback, логируя отсутствие настоящего runtime.
- Wasm остаётся заглушкой, но интерфейс сохранён.

## 0.2.7 - 2025-03-17

- Распределённые penalties: при фейлах job координатор записывает событие в ReputationManager (если доступен).
- Явное предупреждение для wasm/container code_ref; подключение ReputationManager к node.

## 0.2.6 - 2025-03-17

- Документация/README обновлены: новые типы `generic/pipeline`, эндпоинты метрик.
- Примеры: добавлены демонстрации `python_script` через sandbox и pipeline с зависимостями.

## 0.2.5 - 2025-03-17

- Pipeline runner стал топологическим и параллельным: узлы без зависимостей исполняются одновременно, учитываются `depends_on`.
- `code_ref.type=python_script` подкреплён sandbox-процессом; для wasm/container возвращается явная ошибка (интерфейс готов).
- Метрики: добавлен `/metrics_prom` в формате Prometheus (рядом с JSON `/metrics`).

## 0.2.4 - 2025-03-17

- Поддержан `code_ref.type=python_script` через `ProcessSandboxExecutor` (если сконфигурирован).
- Pipeline runner теперь учитывает зависимости `depends_on` и обрабатывает DAG топологически.
- Репутация: penalties из верификации применяются через `ReputationManager` в локальном исполнении.
- Подключена песочница к TaskExecutor (для внешних code_ref).

## 0.2.3.1 - 2025-03-17

- Лёгкий рефакторинг наблюдаемости для планировщика: логирование регистраций/назначений/ACK/результатов job'ов.

## 0.2.3 - 2025-03-17

- Рефакторинг: вынесены generic-обработчики в `core/generic_handlers.py`, pipeline в `core/pipeline.py` (разгружает TaskExecutor).
- Исправлен цикл импортов и ошибки await, тесты in-memory транспорта снова проходят.

## 0.2.2 - 2025-03-17

- Стейты job'ов: координатор отмечает ACK и переход в RUNNING, таймауты фиксируются как failure/expired с штрафами.
- Метрики/репутация: накопление латентности, обновление counters успех/фейл/penalties при получении результатов.

## 0.2.1 - 2025-03-17

- Добавлены версии и changelog.
- Координатор теперь отмечает ACK/результаты job'ов, считает ретраи как EXPIRED при таймауте и собирает среднюю задержку job.
- `get_network_status` расширен метриками (CPU/RAM узла, счётчики job по статусам, средняя задержка).
- Базовая инфраструктура для generic/pipeline, песочниц и протокола уже в 0.2.0; продолжена работа над надёжностью/наблюдаемостью.

## 0.2.0 - 2025-03-17

- Добавлены новые типы задач `GENERIC` и `PIPELINE`, универсальные поля `code_ref`, `input_data`, `parallel`, `pipeline`.
- Все существующие фабрики задач теперь обёрнуты вокруг generic/parallel, сохраняя обратную совместимость.
- Executor научился выполнять generic-задачи через `code_ref` и простые pipeline, а также агрегировать результаты для `map/map_reduce`.
- Обновлена песочница: единый интерфейс `SandboxExecutor` с реализацией `ProcessSandboxExecutor` и заглушками WASM/Container; `ComputeNetwork` запускает self-test песочницы.
- Протокол job-уровня и in-memory транспорт покрыты тестами координатор↔воркер.

## 0.1.0 - 2025-03-15

- Базовая реализация P2P-узла, планировщика задач, шардирования и режимов приватности (`none/shard/mask`) с верификацией результатов (`zk_verify=off/basic/strict`).
- Введён job-уровень с состояниями, ретраями и in-memory транспортом.
- Документация: полное руководство, архитектура, API справочник и примеры использования.
